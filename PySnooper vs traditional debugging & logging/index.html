<!doctype html>
<html>

<head>

    </script>
    <meta charset="utf-8">
    <title>Ant's Adventures In Python</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <!-- Custom styles for this template -->
    <!-- google fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">

    <!-- blog css -->
    <link rel="stylesheet" href="/static/css/github-markdown.css">
    <link rel="stylesheet" href="/static/css/pygments.css">
    <link rel="stylesheet" href="/static/css/blog.css">

    <!-- icons -->
    <script src="https://kit.fontawesome.com/3811bc512b.js" crossorigin="anonymous"></script>
    <style>
        /* .markdown-body {
            box-sizing: border-box;
            min-width: 200px;
            max-width: 980px;
            margin: 0 auto;
            padding: 45px;
        } */

        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        @media (max-width: 767px) {
            .markdown-body {
                padding: 15px;
            }

            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>
</head>

<body data-gr-c-s-loaded="true">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M6NVJ7H"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="container">
        <header class="blog-header py-3">
            <div class="row flex-nowrap justify-content-between align-items-center">
                <div class="col-4">
                    <!--<i class="fab fa-github"></i><a href="https://github.com/anthlis" class="p-2 text-dark">GitHub</a>-->
                    <a class="blog-header-logo" href="/"><img src="/static/img/logo.jpeg" alt="Logo" style="width:70px; border-radius:10px;">
  </a>
                </div>
                <div class="col-4 text-center">
                    <a class="blog-header-name text-dark" href="/">Ant's Adventures In Python</a>
                </div>
                <div class="col-4 d-flex justify-content-end align-items-center">
                    <a href="/about/" class="p-2 text-dark float-right">About</a>
                    <a href="/" class="p-2 text-dark float-right">Blog</a>
                </div>
            </div>
        </header>
        <!-- <main role="main" class="container"> -->
        
<main role="main" class="container">
    <div class="row">
        <div class="col-md-9 blog-main p-4">
            
            
            <div class="blog-post mb-2">
                <h2 class="blog-post-tile">
                    
                    PySnooper vs traditional debugging &amp; logging
                    
                </h2>
                <p class="blog-post-meta">August 16, 2020</p>
                
                <span class="text-info">
                <i class="fas fa-tags"></i></span>
                
                <a href="/tag/python/" class="badge badge-info">Python</a>
                
                <a href="/tag/debugging/" class="badge badge-info">Debugging</a>
                
                <a href="/tag/logging/" class="badge badge-info">Logging</a>
                
                
                
                <div  class="markdown-body">
                <p><h2 id="pysnooper-vs-traditional-debugging-logging">PySnooper vs traditional debugging &amp; logging</h2>
<p>This article is a look at PySnooper and a revision of debugging and logging in Python. I use a simple algorithm to determine if a number is an Armstrong number type or not.</p>
<p>I was intrigued to hear about PySnooper on episode 185 of the Python Bytes podcast <a href="https://pythonbytes.fm/episodes/show/185/this-code-is-snooping-on-you-a-good-thing">Python Bytes podcast</a>. It promised a play-by-play log of a function, including which lines ran and when, and exactly when local variables were changed simply by adding just one decorator line to the function. </p>
<p>I know it's frowned upon to use print statements for debugging, and I do try to use Python's interactive source code debugger, pdb, but it comes with commands I have to remember. Actually, this is a poor excuse, and especially if you use an IDE such as PyCharm which makes debugging so easy! If you're using print statements because you don't know how to use a debugger, that's bad. There's even a case for logging instead of using a debugger sometimes too. E.g. If you do print, consider using a logging function designed for that, rather than just an ordinary print statement.</p>
<p>The best way to install PySnooper is with Pip: </p>
<p><code>$ pip install pysnooper</code></p>
<p>There's also a Conda install with conda-forge too. </p>
<h3 id="armstrong-numbers">Armstrong Number's</h3>
<p>My example will use a function to solve the Armstrong number question: given an integer, determine if it is an armstrong number.</p>
<p>An armstrong number is a number that is the sum of its own digits each raised to the power of the number of digits.</p>
<p>a) 153 is an armstrong number. It's a 3 digit number:</p>
<div class="codehilite"><pre><span></span><code>(1^3) + (5^3) + (3^3)= 153.
</code></pre></div>

<p>b) 371 is also an armstrong number.</p>
<p>c) any single digit numbers (1-9) are armstrong numbers as well.</p>
<h3 id="a-revision-and-comparison-of-debugging-and-logging-techniques">A revision and comparison of debugging and logging techniques.</h3>
<h4 id="my-original-armstrong-number-algorithm">My original Armstrong number algorithm</h4>
<p>Here is the code that I'll first demonstrate works with no means of any debugging:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">is_armstrong</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    input: 153</span>
<span class="sd">    output: True</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">n_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">n</span>

    <span class="k">while</span> <span class="n">temp</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">digit</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">%</span> <span class="mi">10</span>
        <span class="nb">sum</span> <span class="o">+=</span> <span class="n">digit</span> <span class="o">**</span> <span class="n">n_length</span>
        <span class="n">temp</span> <span class="o">//=</span> <span class="mi">10</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="nb">sum</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">is_armstrong</span><span class="p">(</span><span class="mi">153</span><span class="p">))</span>
</code></pre></div>

<p>The output is simply: </p>
<div class="codehilite"><pre><span></span><code>True
Process<span class="w"> </span>finished<span class="w"> </span>with<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>code<span class="w"> </span><span class="m">0</span>
</code></pre></div>

<p>If this wasn't working, we'd have to inspect the error messages. </p>
<h4 id="1-using-print-statements">1. Using print statements</h4>
<p>This is the same code, but interspersed with a number of simple print statements:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">is_armstrong</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    input: 153</span>
<span class="sd">    output: True</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">n_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;n_length: </span><span class="si">{</span><span class="n">n_length</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># delete later</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">n</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The starting number is </span><span class="si">{</span><span class="n">temp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># delete later</span>

    <span class="k">while</span> <span class="n">temp</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">digit</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">%</span> <span class="mi">10</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;digit: </span><span class="si">{</span><span class="n">digit</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># delete later</span>
        <span class="nb">sum</span> <span class="o">+=</span> <span class="n">digit</span> <span class="o">**</span> <span class="n">n_length</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;sum: </span><span class="si">{</span><span class="nb">sum</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># delete later</span>
        <span class="n">temp</span> <span class="o">//=</span> <span class="mi">10</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;temp: </span><span class="si">{</span><span class="n">temp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># delete later</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="nb">sum</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">is_armstrong</span><span class="p">(</span><span class="mi">153</span><span class="p">))</span>
</code></pre></div>

<p>The output of this is quite helpful: </p>
<div class="codehilite"><pre><span></span><code>n_length:<span class="w"> </span><span class="m">3</span>
The<span class="w"> </span>starting<span class="w"> </span>number<span class="w"> </span>is<span class="w"> </span><span class="m">153</span>
digit:<span class="w"> </span><span class="m">3</span>
sum:<span class="w"> </span><span class="m">27</span>
temp:<span class="w"> </span><span class="m">15</span>
digit:<span class="w"> </span><span class="m">5</span>
sum:<span class="w"> </span><span class="m">152</span>
temp:<span class="w"> </span><span class="m">1</span>
digit:<span class="w"> </span><span class="m">1</span>
sum:<span class="w"> </span><span class="m">153</span>
temp:<span class="w"> </span><span class="m">0</span>
True

Process<span class="w"> </span>finished<span class="w"> </span>with<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>code<span class="w"> </span><span class="m">0</span>
</code></pre></div>

<h4 id="2-using-the-pysnooper-decorator">2. Using the PySnooper decorator</h4>
<p>This is the same code as the original, but using the PySnooper decorator:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">pysnooper</span>

<span class="nd">@pysnooper</span><span class="o">.</span><span class="n">snoop</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">is_armstrong</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    input: 153</span>
<span class="sd">    output: True</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">n_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">n</span>

    <span class="k">while</span> <span class="n">temp</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">digit</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">%</span> <span class="mi">10</span>
        <span class="nb">sum</span> <span class="o">+=</span> <span class="n">digit</span> <span class="o">**</span> <span class="n">n_length</span>
        <span class="n">temp</span> <span class="o">//=</span> <span class="mi">10</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="nb">sum</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">is_armstrong</span><span class="p">(</span><span class="mi">153</span><span class="p">))</span>
</code></pre></div>

<p>The output of this is more involved using only one extra line of code (not including the import)!</p>
<div class="codehilite"><pre><span></span><code>Source<span class="w"> </span>path:...<span class="w"> </span>/Users/anthlis/pycharmprojects/pysnooper/arm_3_snoops.py
Starting<span class="w"> </span>var:..<span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">153</span>
<span class="m">14</span>:55:00.081637<span class="w"> </span>call<span class="w">         </span><span class="m">5</span><span class="w"> </span>def<span class="w"> </span>is_armstrong<span class="o">(</span>n:<span class="w"> </span>int<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>bool:
<span class="m">14</span>:55:00.082160<span class="w"> </span>line<span class="w">        </span><span class="m">10</span><span class="w">     </span><span class="nv">n_length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>len<span class="o">(</span>str<span class="o">(</span>n<span class="o">))</span>
New<span class="w"> </span>var:.......<span class="w"> </span><span class="nv">n_length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span>
<span class="m">14</span>:55:00.082252<span class="w"> </span>line<span class="w">        </span><span class="m">11</span><span class="w">     </span><span class="nv">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
New<span class="w"> </span>var:.......<span class="w"> </span><span class="nv">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="m">14</span>:55:00.082350<span class="w"> </span>line<span class="w">        </span><span class="m">12</span><span class="w">     </span><span class="nv">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>n
New<span class="w"> </span>var:.......<span class="w"> </span><span class="nv">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">153</span>
<span class="m">14</span>:55:00.082455<span class="w"> </span>line<span class="w">        </span><span class="m">14</span><span class="w">     </span><span class="k">while</span><span class="w"> </span>temp<span class="w"> </span>&gt;<span class="w"> </span><span class="m">0</span>:
<span class="m">14</span>:55:00.082562<span class="w"> </span>line<span class="w">        </span><span class="m">15</span><span class="w">         </span><span class="nv">digit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>temp<span class="w"> </span>%<span class="w"> </span><span class="m">10</span>
New<span class="w"> </span>var:.......<span class="w"> </span><span class="nv">digit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span>
<span class="m">14</span>:55:00.082650<span class="w"> </span>line<span class="w">        </span><span class="m">16</span><span class="w">         </span><span class="nv">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>digit<span class="w"> </span>**<span class="w"> </span>n_length
Modified<span class="w"> </span>var:..<span class="w"> </span><span class="nv">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">27</span>
<span class="m">14</span>:55:00.082765<span class="w"> </span>line<span class="w">        </span><span class="m">17</span><span class="w">         </span>temp<span class="w"> </span>//<span class="o">=</span><span class="w"> </span><span class="m">10</span>
Modified<span class="w"> </span>var:..<span class="w"> </span><span class="nv">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">15</span>
<span class="m">14</span>:55:00.082875<span class="w"> </span>line<span class="w">        </span><span class="m">14</span><span class="w">     </span><span class="k">while</span><span class="w"> </span>temp<span class="w"> </span>&gt;<span class="w"> </span><span class="m">0</span>:
<span class="m">14</span>:55:00.083132<span class="w"> </span>line<span class="w">        </span><span class="m">15</span><span class="w">         </span><span class="nv">digit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>temp<span class="w"> </span>%<span class="w"> </span><span class="m">10</span>
Modified<span class="w"> </span>var:..<span class="w"> </span><span class="nv">digit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span>
<span class="m">14</span>:55:00.083300<span class="w"> </span>line<span class="w">        </span><span class="m">16</span><span class="w">         </span><span class="nv">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>digit<span class="w"> </span>**<span class="w"> </span>n_length
Modified<span class="w"> </span>var:..<span class="w"> </span><span class="nv">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">152</span>
<span class="m">14</span>:55:00.083507<span class="w"> </span>line<span class="w">        </span><span class="m">17</span><span class="w">         </span>temp<span class="w"> </span>//<span class="o">=</span><span class="w"> </span><span class="m">10</span>
Modified<span class="w"> </span>var:..<span class="w"> </span><span class="nv">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="m">14</span>:55:00.083765<span class="w"> </span>line<span class="w">        </span><span class="m">14</span><span class="w">     </span><span class="k">while</span><span class="w"> </span>temp<span class="w"> </span>&gt;<span class="w"> </span><span class="m">0</span>:
<span class="m">14</span>:55:00.083983<span class="w"> </span>line<span class="w">        </span><span class="m">15</span><span class="w">         </span><span class="nv">digit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>temp<span class="w"> </span>%<span class="w"> </span><span class="m">10</span>
Modified<span class="w"> </span>var:..<span class="w"> </span><span class="nv">digit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="m">14</span>:55:00.084080<span class="w"> </span>line<span class="w">        </span><span class="m">16</span><span class="w">         </span><span class="nv">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>digit<span class="w"> </span>**<span class="w"> </span>n_length
Modified<span class="w"> </span>var:..<span class="w"> </span><span class="nv">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">153</span>
<span class="m">14</span>:55:00.084177<span class="w"> </span>line<span class="w">        </span><span class="m">17</span><span class="w">         </span>temp<span class="w"> </span>//<span class="o">=</span><span class="w"> </span><span class="m">10</span>
Modified<span class="w"> </span>var:..<span class="w"> </span><span class="nv">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="m">14</span>:55:00.084507<span class="w"> </span>line<span class="w">        </span><span class="m">14</span><span class="w">     </span><span class="k">while</span><span class="w"> </span>temp<span class="w"> </span>&gt;<span class="w"> </span><span class="m">0</span>:
<span class="m">14</span>:55:00.084770<span class="w"> </span>line<span class="w">        </span><span class="m">19</span><span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="o">(</span><span class="nv">n</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>sum<span class="o">)</span>
<span class="m">14</span>:55:00.085044<span class="w"> </span><span class="k">return</span><span class="w">      </span><span class="m">19</span><span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="o">(</span><span class="nv">n</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>sum<span class="o">)</span>
Return<span class="w"> </span>value:..<span class="w"> </span>True
Elapsed<span class="w"> </span>time:<span class="w"> </span><span class="m">00</span>:00:00.003629
True

Process<span class="w"> </span>finished<span class="w"> </span>with<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>code<span class="w"> </span><span class="m">0</span>
</code></pre></div>

<h4 id="3-using-the-pythons-pdb-debugger">3. Using the Python's pdb debugger</h4>
<p>Since Python 3.7, it has been possible to simply enter the debugger by using the built-in function:</p>
<div class="codehilite"><pre><span></span><code>breakpoint()
</code></pre></div>

<p>instead of writing </p>
<div class="codehilite"><pre><span></span><code>import pdb; set_trace()
</code></pre></div>

<p>When the line above is executed, Python stops and waits for you to tell it what to do next. You’ll see a (Pdb) prompt. This means that you’re now paused in the interactive debugger and can enter a command. I tend to only use 'n' to execute the current statement (step over), 'c' to continue execution until a breakpoint is encountered or 'p <em>expr</em>' to print the value of <em>expr</em>. (There are cheatsheets on the interwebs and you can always type 'h' or 'help' for a list of commands to get further help on).</p>
<p>This uses the same code as the original, but using Python's pdb debugger:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">is_armstrong</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    input: 153</span>
<span class="sd">    output: True</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">n_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">n</span>

    <span class="k">while</span> <span class="n">temp</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">breakpoint</span><span class="p">()</span>
        <span class="n">digit</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">%</span> <span class="mi">10</span>
        <span class="nb">sum</span> <span class="o">+=</span> <span class="n">digit</span> <span class="o">**</span> <span class="n">n_length</span>
        <span class="n">temp</span> <span class="o">//=</span> <span class="mi">10</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="nb">sum</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">is_armstrong</span><span class="p">(</span><span class="mi">153</span><span class="p">))</span>
</code></pre></div>

<p>The output requires you to instruct the debugger what to do next in terms of stepping through the code: </p>
<div class="codehilite"><pre><span></span><code>&gt;<span class="w"> </span>/Users/anthlis/pycharmprojects/pysnooper/arm_4_pdb.py<span class="o">(</span><span class="m">12</span><span class="o">)</span>is_armstrong<span class="o">()</span>
-&gt;<span class="w"> </span><span class="nv">digit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>temp<span class="w"> </span>%<span class="w"> </span><span class="m">10</span>
<span class="o">(</span>Pdb<span class="o">)</span><span class="w"> </span>
</code></pre></div>

<p>At the command prompt is where you enter the instruction of course. I've chosen to enter 'p' several times...</p>
<div class="codehilite"><pre><span></span><code>-&gt;<span class="w"> </span>temp<span class="w"> </span>//<span class="o">=</span><span class="w"> </span><span class="m">10</span>
<span class="o">(</span>Pdb<span class="o">)</span><span class="w"> </span>p<span class="w"> </span>digit
<span class="m">3</span>
<span class="o">(</span>Pdb<span class="o">)</span><span class="w"> </span>p<span class="w"> </span>sum
<span class="m">27</span>
<span class="o">(</span>Pdb<span class="o">)</span><span class="w"> </span>p<span class="w"> </span>temp
<span class="m">153</span>
<span class="o">(</span>Pdb<span class="o">)</span><span class="w"> </span>n
&gt;<span class="w"> </span>/Users/anthlis/pycharmprojects/pysnooper/arm_4_pdb.py<span class="o">(</span><span class="m">10</span><span class="o">)</span>is_armstrong<span class="o">()</span>
-&gt;<span class="w"> </span><span class="k">while</span><span class="w"> </span>temp<span class="w"> </span>&gt;<span class="w"> </span><span class="m">0</span>:
<span class="o">(</span>Pdb<span class="o">)</span><span class="w"> </span>p<span class="w"> </span>digit
<span class="m">3</span>
<span class="o">(</span>Pdb<span class="o">)</span><span class="w"> </span>p<span class="w"> </span>sum
<span class="m">27</span>
<span class="o">(</span>Pdb<span class="o">)</span><span class="w"> </span>p<span class="w"> </span>temp
<span class="m">15</span>
<span class="o">(</span>Pdb<span class="o">)</span><span class="w"> </span>
</code></pre></div>

<p>and so on... </p>
<h4 id="4-a-revision-of-logging">4. A revision of Logging</h4>
<p>I mentioned logging at the start. Logging has its place, but I hardly ever use it, and I think it's because it seemingly takes a lot of effort to set-up initially. Afterall, I just want to fix the code and move on, right? For the most part, I'm writing simple code functions that I can inspect and debug quickly using other means. I suppose logging is useful for code where you don't readily have access to a terminal to inspect values of expressions such as web applications with multiple users, time stamped events or databases maybe? </p>
<p>I first encountered logging during the Talk Python &amp; PyBites 100 days of code course. Michael Kennedy discussed logging as per the standard library, and then introduced Logbook for simpler logging. This is what I have used here, which needs a pip install. </p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">logbook</span> <span class="kn">import</span> <span class="n">Logger</span><span class="p">,</span> <span class="n">StreamHandler</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">StreamHandler</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span><span class="o">.</span><span class="n">push_application</span><span class="p">()</span>
<span class="n">log</span> <span class="o">=</span> <span class="n">Logger</span><span class="p">(</span><span class="s1">&#39;Logbook&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">is_armstrong</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    input: 153</span>
<span class="sd">    output: True</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">n_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">n</span>

    <span class="k">while</span> <span class="n">temp</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">digit</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">%</span> <span class="mi">10</span>
        <span class="nb">sum</span> <span class="o">+=</span> <span class="n">digit</span> <span class="o">**</span> <span class="n">n_length</span>
        <span class="n">temp</span> <span class="o">//=</span> <span class="mi">10</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;digit: </span><span class="si">{</span><span class="n">digit</span><span class="si">}</span><span class="s1">, sum: </span><span class="si">{</span><span class="nb">sum</span><span class="si">}</span><span class="s1">, temp: </span><span class="si">{</span><span class="n">temp</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="nb">sum</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">is_armstrong</span><span class="p">(</span><span class="mi">153</span><span class="p">))</span>
</code></pre></div>

<p>The ouput produces a simple and tidy log output as shown:</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="m">2020</span>-08-16<span class="w"> </span><span class="m">03</span>:48:39.927662<span class="o">]</span><span class="w"> </span>INFO:<span class="w"> </span>Logbook:<span class="w"> </span>digit:<span class="w"> </span><span class="m">3</span>,<span class="w"> </span>sum:<span class="w"> </span><span class="m">27</span>,<span class="w"> </span>temp:<span class="w"> </span><span class="m">15</span>
<span class="o">[</span><span class="m">2020</span>-08-16<span class="w"> </span><span class="m">03</span>:48:39.928117<span class="o">]</span><span class="w"> </span>INFO:<span class="w"> </span>Logbook:<span class="w"> </span>digit:<span class="w"> </span><span class="m">5</span>,<span class="w"> </span>sum:<span class="w"> </span><span class="m">152</span>,<span class="w"> </span>temp:<span class="w"> </span><span class="m">1</span>
<span class="o">[</span><span class="m">2020</span>-08-16<span class="w"> </span><span class="m">03</span>:48:39.928214<span class="o">]</span><span class="w"> </span>INFO:<span class="w"> </span>Logbook:<span class="w"> </span>digit:<span class="w"> </span><span class="m">1</span>,<span class="w"> </span>sum:<span class="w"> </span><span class="m">153</span>,<span class="w"> </span>temp:<span class="w"> </span><span class="m">0</span>
True

Process<span class="w"> </span>finished<span class="w"> </span>with<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>code<span class="w"> </span><span class="m">0</span>
</code></pre></div>

<h3 id="conclusion">Conclusion</h3>
<p>The most obvious case where a debugger is the most useful is if my program crashes. With a debugger I can stop exactly where the problem occurs and inspect some variables to see what's going on.</p>
<p>On the flip side, sometimes with very complex programs with multiple threads or processes, using a debugger can be a real pain! In that sort of program it's often easiest to print or log things.</p>
<p>With PySnooper, there is no need to setup a debugger to debug code. And there is no need to delete all the strategically placed print statements either that PySnooper does away with. </p>
<p>I like PySnooper and will continue to use it in my arsenal to obliterate bugs and crashes in my future code, no matter how hard I try not to let them occur in the first place! </p>
<p>This was also a useful exercise for me to revisit the use of Logbook and I will try to use this more often too. </p>
<h3 id="useful-links">Useful Links:</h3>
<p>[1]: <a href="https://github.com/cool-RR/PySnooper">PySnooper on GitHub</a><br />
[2]: <a href="https://realpython.com/python-debugging-pdb/">Real Python's Python Debugging With Pdb</a><br />
[3]: <a href="https://www.youtube.com/watch?v=HHrVBKZLolg">"Goodbye Print Statements, Hello Debugger!" - Nina Zakharenko (PyCon AU 2019)</a><br />
[4]: <a href="https://training.talkpython.fm/courses/details/100-days-of-code-in-python">Talk Python / PyBites 100 days of code</a><br />
[5]: <a href="https://logbook.readthedocs.io/en/stable/">Logbook for better Python logging</a>  </p>
<p>Thanks for reading! </p></p>
            </div>
                
            </div>
            <hr>
            
        </div>
        <aside class="col-md-3 blog-sidebar">
            <div class="p-4">
                <h4 class="font-italic">Tags</h4>
                <ol class="list-unstyled mb-0">
                    
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/python/" class="badge badge-info">Python<!-- (4)--></a>
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/markdown/" class="badge badge-info">Markdown<!-- (2)--></a>
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/pybites/" class="badge badge-info">Pybites<!-- (2)--></a>
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/cheatsheet/" class="badge badge-info">Cheatsheet<!-- (1)--></a>
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/flask/" class="badge badge-info">Flask<!-- (1)--></a>
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/github/" class="badge badge-info">Github<!-- (1)--></a>
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/images/" class="badge badge-info">Images<!-- (1)--></a>
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/micropython/" class="badge badge-info">Micropython<!-- (1)--></a>
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/pico/" class="badge badge-info">Pico<!-- (1)--></a>
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/rshell/" class="badge badge-info">Rshell<!-- (1)--></a>
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/quickpost!/" class="badge badge-info">Quickpost!<!-- (1)--></a>
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/debugging/" class="badge badge-info">Debugging<!-- (1)--></a>
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/logging/" class="badge badge-info">Logging<!-- (1)--></a>
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/code%20club/" class="badge badge-info">Code club<!-- (1)--></a>
                    
                    <!--<i class="fas fa-tags text-info"></i> --><a href="/tag/communication/" class="badge badge-info">Communication<!-- (1)--></a>
                    
                    
                </ol>
            </div>
            <div class="p-4">
                <h4 class="font-italic">Archives</h4>
                <ol class="list-unstyled mb-0">
                    
                    
                    <li><a href="/archive/April%202020/" class="text-dark">April 2020<!-- (4)--></a></li>
                    
                    <li><a href="/archive/April%202021/" class="text-dark">April 2021<!-- (1)--></a></li>
                    
                    <li><a href="/archive/August%202020/" class="text-dark">August 2020<!-- (1)--></a></li>
                    
                    <li><a href="/archive/May%202020/" class="text-dark">May 2020<!-- (1)--></a></li>
                    
                    
                </ol>
            </div>
            <div class="p-4">
                    <h4 class="font-italic">Elsewhere</h4>
                    <ol class="list-unstyled mb-0">
                        <a href="https://codechalleng.es/profiles/Anthlis" target="_blank"><i class="fab fa-python fa-2x p-2 text-dark" title="PyBites"></i></a>
                        <a href="https://github.com/Anthlis" target="_blank"><i class="fab fa-github fa-2x p-2 text-dark" title="GitHub"></i></a>
                        <a href="https://mastodon.nz/@Anthlis" target="_blank"><i class="fab fa-mastodon fa-2x p-2 text-dark" title="Mastodon"></i></a>
                        <a href="https://www.linkedin.com/in/anthonylister/" target="_blank"><i class="fab fa-linkedin fa-2x p-2 text-dark" title="LinkedIn"></i></a>
                        <!-- <a href="https://github.com/Anthlis/100DaysOfSwift" target="_blank"><i class="fab fa-swift fa-2x p-2 text-dark" title="100Days_Swift_Log"></i></a> -->
                        <!-- <a href="https://www.strava.com/athletes/1753626" target="_blank"><i class="fab fa-strava fa-2x p-2 text-dark" title="Strava Profile"></i></a> -->
                        <!-- <a href="mailto:antspam27@gmail.com" target="_blank"><i class="fas fa-envelope fa-2x p-2 text-dark" title="Email Me!"></i></a> -->
                        <!-- <a href="#" target="_blank"><i class="fas fa-rss fa-2x p-2 text-dark" title="RSS Feed"></i></a> -->
                        <!-- <a href="https://twitter.com/Anthlis" target="_blank"><i class="fab fa-twitter fa-2x p-2 text-dark" title="Twitter"></i></a> -->

                    </ol>
                </div>

            <div class="p-4">
                <p style="font-size:12px">Made with Python & Flask<br>All rights reserved.<br>Copyright &copy 2023.</p>
            </div>
        </aside>
    </div>
</main>

        <!-- </main> -->
    </div>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
    </script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          config: ["MMLorHTML.js"],
          jax: ["input/TeX", "output/HTML-CSS", "output/NativeMML"],
          extensions: ["MathMenu.js", "MathZoom.js"],
          TeX: {
            equationNumbers: {autoNumber: "AMS"}
          }
        });
        </script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js">
    </script>
</body>

</html>